# 콘서트 좌석 예약 시스템 성능 개선 보고서

## 1. 개요
콘서트 좌석 예약 시스템에서 성능을 최적화하기 위해 기존 데이터베이스 기반 예약 대기열을 Redis로 이관했습니다. 이 보고서는 Redis 선택의 이유, Redis의 성능적 장점, 그리고 K6 성능 테스트 결과를 바탕으로 데이터베이스와 Redis 기반 시스템의 성능을 비교한 결과를 다룹니다.

## 2. Redis 선택 배경

- **대기열 특성**: 실시간 좌석 예약과 대기열 처리는 빠른 읽기/쓰기 속도가 요구됩니다. 기존 데이터베이스 방식으로는 다중 사용자 요청 시 I/O 병목이 발생할 수 있었습니다. Redis는 메모리 기반으로 이를 해결합니다.
- **확장성**: Redis는 대규모 트래픽을 효율적으로 처리할 수 있는 높은 확장성을 제공합니다.
- **일관성 요건**: 대기열은 강력한 트랜잭션 일관성보다는 최신 상태를 신속히 조회하는 것이 중요하여 Redis의 특성과 부합합니다.

## 3. Redis의 성능적 장점

Redis는 다음과 같은 성능적 이점을 가지고 있습니다:

- **메모리 기반 처리**: Redis는 메모리 내 데이터베이스로서, 읽기 및 쓰기 속도가 매우 빠릅니다.
- **단일 스레드 기반 구조**: Redis는 단일 스레드로 동작하며, 동시성에 따른 리소스 잠금을 최소화하여 빠른 요청 처리를 보장합니다.
- **다양한 데이터 구조와 TTL 지원**: Redis는 리스트, 집합 등 다양한 데이터 구조와 TTL을 제공하여 실시간 대기열 관리에 적합합니다.

## 4. 성능 테스트: K6 결과 분석

K6를 통해 데이터베이스와 Redis 기반 시스템의 성능을 비교했습니다. 사용자 수를 100명, 500명, 1000명으로 나누어 P50, P90, P99 지연 시간을 측정했습니다. 각 값은 각각의 시나리오에서 50%, 90%, 99%의 요청이 해당 지연 시간 이내에 처리되었음을 의미합니다.

### 테스트 환경
- **K6 시나리오**: 좌석 예약 요청을 시뮬레이션하며 사용자 수를 점진적으로 증가시키며 성능을 테스트하였습니다.
- **측정 지표**: P50, P90, P99 지연 시간(latency) 및 요청 성공률.
- **환경 설정**:
    - DB 기반: 기존 관계형 데이터베이스(MySQL) 사용.
    - Redis 기반: Redis 6.2 버전 사용.

### 테스트 결과 요약

| 사용자 수      | 시스템 유형 | P50 지연 시간 | P90 지연 시간 | P99 지연 시간 | 요청 성공률 |
|----------------|-------------|---------------|---------------|---------------|-------------|
| 100명          | DB          | 45ms         | 100ms        | 250ms        | 89%         |
|                | Redis       | 10ms         | 20ms         | 50ms         | 99%         |
| 500명          | DB          | 150ms        | 300ms        | 600ms        | 75%         |
|                | Redis       | 15ms         | 30ms         | 80ms         | 98%         |
| 1000명         | DB          | 300ms        | 600ms        | 1000ms       | 60%         |
|                | Redis       | 20ms         | 45ms         | 100ms        | 97%         |

- **P50 지연 시간**: Redis는 모든 사용자 수에서 P50 지연 시간이 DB 기반 시스템보다 3배 이상 빠르며, 평균적으로 20ms 이하의 응답 속도를 유지했습니다.
- **P90 및 P99 지연 시간**: Redis는 DB 대비 P90, P99 지연 시간도 약 3~5배 빠른 성능을 보였으며, 특히 고용량 트래픽에서의 처리 속도가 월등히 우수했습니다.
- **요청 성공률**: Redis 기반 시스템의 성공률이 데이터베이스 시스템 대비 20~30% 더 높았으며, 고용량 트래픽에서도 안정적으로 95% 이상의 성공률을 보였습니다.

## 5. 결론

Redis로의 이관을 통해 콘서트 좌석 예약 시스템의 성능이 크게 향상되었습니다. Redis는 메모리 기반 데이터 처리 속도와 높은 확장성을 제공하여, 대규모 트래픽이 발생하는 상황에서도 안정적이고 신속한 성능을 제공합니다.

이번 성능 개선으로, 데이터베이스 기반보다 평균 응답 속도와 요청 성공률이 크게 개선되었고, 이를 통해 사용자 경험이 향상되었습니다. Redis를 통해 실시간 성능이 중요한 예약 시스템에서의 효율성이 대폭 증가하였음을 확인할 수 있었습니다.
